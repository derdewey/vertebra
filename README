== Where to get Vertebra

The source code is always available via Git:

  $ git clone git://github.com/engineyard/vertebra.git
  $ cd vertebra
  $ git submodule init
  $ git submodule update

When switching between branches you need to remember to update the
submodules. So to checkout the 0.3.0 tag to a branch you'd do this:

  $ git checkout -b 0.3.0 0.3.0
  $ git submodule update

Then when you went back to master you'd do this:

  $ git checkout master
  $ git submodule update

== Dependencies

We have provided a script (deps.sh) that installs some dependencies in
/opt/local/vertebra:

 * Erlang OTP (R12B-5)
 * ejabberd (2.0.2)
 * erlsom (1.2.1)

The script also installs the following gems using the gem command found on your
PATH:

 * rspec
 * open4
 * thor
 * rr
 * hoe

The following dependencies are not installed:

 * expat (most systems have this)
 * gcc (most systems have this, Macs need to install Xcode)
 * iconv (glibc systems have this, only needed for ejabberd mod_irc)
 * make (most systems have this, Macs need to install Xcode)
 * glib (most linux systems have this, needed for loudmouth)
 * loudmouth (see note below)
 * loudmouth-ruby
 * openssl (most systems have this)
 * ruby
 * rubygems
 * wget OR curl (this includes most Macs and Linux machines)
 * zlib (most systems have this)

=== Loudmouth

As of this writing the latest released version of loudmouth is 1.4.3. This
version of the library results in segmentation faults when used with
Vertebra. The latest Engine Yard fork of loudmouth is much more stable. It can
be found at:

  git://github.com/engineyard/loudmouth.git

Similarly, there have been fixes to the loudmouth-ruby bindings, which can be
found at:

  git://github.com/engineyard/loudmouth-ruby.git

== Installation

If you are installing from git you need to run this command to set up the build
system:

  $ autoreconf --install && autoreconf

Then to install everything:

  $ ./deps.sh -a
  $ ./configure && make && make install

What is installed can be broken down into three categories: vertebra libraries,
and vertebra actors.

==== Vertebra Libraries

 * vertebra -- Core agent library for ruby.
 * vertebra-erl -- Core agent library for erlang and core vertebra services.

==== Vertebra Actors

 * vertebra-gemtool -- Actor for managing ruby gems.
 * vertebra-xen -- Actor for accessing Xen slice information.

== Bugs

Currently there is an intermittent segfault in the ruby agent library. It seems
to be related to the loudmouth-ruby bindings.
